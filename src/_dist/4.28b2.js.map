{"version":3,"sources":["webpack:///./src/static/Pages/Note/Editor.scss?3b79","webpack:///./src/static/Pages/Note/Edit.js","webpack:///./src/static/components/Editor/index.js","webpack:///./src/static/components/Editor/inde.scss?2d39"],"names":["module","exports","EditPage","history","useHistory","id","useParams","useState","title","setTitle","useQuery","API","note","retry","refetchOnWindowFocus","error","isLoading","data","useEffect","editorState","EditorState","createWithContent","convertFromRaw","JSON","parse","content","className","editCss","type","value","onChange","e","target","editorConfig","onSubmit","contentState","getCurrentContent","hasText","length","stringify","convertToRaw","editNote","then","alert","push","status","myEditor","submitText","createEmpty","setEditorState","editorRef","useRef","css","container","cls","editorContainer","readOnly","onClick","current","focus","ref"],"mappings":"6EACAA,EAAOC,QAAU,CAAC,MAAQ,oB,2jCC+DXC,UAxDE,WACf,IAAMC,EAAUC,cACRC,EAAOC,cAAPD,GAFa,IAGOE,mBAAS,GAAI,CAACC,IAHrB,GAGbA,EAHa,KAGNC,EAHM,OAKcC,YAASL,EAAIM,IAAIC,KAAM,CACxDC,OAAO,EACPC,sBAAsB,IAFhBC,EALa,EAKbA,MAAOC,EALM,EAKNA,UAAWC,EALL,EAKKA,KAK1BC,qBAAU,WACRD,GAAQR,EAASQ,EAAKT,SACrB,CAACS,IAmBJ,GAAIF,GAASC,EACX,OAAO,2CAET,IAAMG,EAAcC,cAAYC,kBAC9BC,yBAAeC,KAAKC,MAAMP,EAAKQ,WAGjC,OACE,6BACE,2BACEC,UAAWC,IAAQnB,MACnBoB,KAAK,OACLC,MAAOrB,EACPsB,SAAU,SAAAC,GAAMtB,EAASsB,EAAEC,OAAOH,UAEpC,kBAAC,IAAD,CACEI,aAAc,CACZd,eAEFe,SApCe,SAACf,GACpB,IAAMgB,EAAehB,EAAYiB,oBACjC,GAAID,EAAaE,WAAa7B,EAAM8B,OAAS,EAAG,CAC9C,IAAMb,EAAUF,KAAKgB,UAAUC,uBAAaL,IAC5CxB,IAAI8B,SAAS,CACXjC,QAAOiB,UAASpB,OACfqC,MAAK,WACNC,MAAM,YACNxC,EAAQyC,KAAK,QAJf,OAKS,SAAAb,GACU,MAAbA,EAAEc,QACJF,MAAM,yC,8vCCODG,IAlCE,SAAC,GAIZ,QAHJC,kBAGI,MAHS,SAGT,MAFJb,gBAEI,MAFO,aAEP,MADJD,oBACI,MADW,GACX,MACoC1B,oBAAS,kBAC/C0B,EAAad,YACXc,EAAad,YACbC,cAAY4B,iBAJZ,GACI7B,EADJ,KACiB8B,EADjB,KAMEC,EAAYC,iBAAO,MAOzB,OACE,yBAAKzB,UAAW0B,IAAIC,WAClB,yBAAK3B,UAAW4B,IAAIF,IAAIG,gBAAiBtB,EAAauB,UAAYJ,IAAII,UAAWC,QAR9D,WACrBP,EAAUQ,QAAQC,UAQd,kBAAC,SAAD,KACM1B,EADN,CAEE2B,IAAKV,EACL/B,YAAaA,EACbW,SAAUmB,OAGXhB,EAAauB,UACd,4BAAQC,QAbO,kBAAMvB,EAASf,KAaE4B,M,mBCjCxC/C,EAAOC,QAAU,CAAC,gBAAkB,oBAAoB,SAAW,oBAAoB,UAAY","file":"4.28b2.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Note_32G5AHZ8SM\"};","import React, { useState, useEffect } from 'react'\nimport Editor from '../../components/Editor'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { API } from '../../utils/Api'\nimport { useQuery } from 'react-query'\nimport { EditorState, convertFromRaw, convertToRaw } from 'draft-js'\nimport editCss from './Editor.scss'\n\nconst EditPage = () => {\n  const history = useHistory()\n  const { id } = useParams()\n  const [ title, setTitle ] = useState('', [title])\n\n  const { error, isLoading, data } = useQuery(id, API.note, {\n    retry: false,\n    refetchOnWindowFocus: false\n  })\n  \n  useEffect(() => {\n    data && setTitle(data.title)\n  }, [data])\n\n  const handleSubmit = (editorState) => {\n    const contentState = editorState.getCurrentContent()\n    if (contentState.hasText() && title.length > 0) {\n      const content = JSON.stringify(convertToRaw(contentState))\n      API.editNote({\n        title, content, id\n      }).then(() => {\n        alert('success.')\n        history.push('/')\n      }).catch(e => {\n        if (e.status === 404) {\n          alert('not fount, create new note?')\n        }\n      })\n    }\n  }\n\n  if (error || isLoading ) {\n    return <div>Loading...</div>\n  }\n  const editorState = EditorState.createWithContent(\n    convertFromRaw(JSON.parse(data.content))\n  )\n\n  return (\n    <div>\n      <input\n        className={editCss.title}\n        type=\"text\"\n        value={title}\n        onChange={e => {setTitle(e.target.value)}}\n      />\n      <Editor \n        editorConfig={{\n          editorState\n        }}\n        onSubmit={handleSubmit}\n      />\n    </div>\n  )\n}\n\nexport default EditPage\n","import React, { useState, useRef } from 'react'\nimport { Editor, EditorState } from 'draft-js'\nimport 'draft-js/dist/Draft.css'\nimport css from './inde.scss'\nimport cls from 'classnames'\n\nconst myEditor = ({\n  submitText = 'submit',\n  onSubmit = () => {},\n  editorConfig = {}\n}) => {\n  const [ editorState, setEditorState ] = useState(() => \n    editorConfig.editorState\n    ? editorConfig.editorState\n    : EditorState.createEmpty()\n  )\n  const editorRef = useRef(null)\n  const handleModClick = () => {\n    editorRef.current.focus()\n  }\n  \n  const handleSubmit = () => onSubmit(editorState)\n\n  return (\n    <div className={css.container}>\n      <div className={cls(css.editorContainer, editorConfig.readOnly && css.readOnly)} onClick={handleModClick}>\n        <Editor\n          {...editorConfig}\n          ref={editorRef}\n          editorState={editorState}\n          onChange={setEditorState}\n        />\n      </div>\n      { !editorConfig.readOnly && (\n        <button onClick={handleSubmit}>{submitText}</button>\n      ) }\n    </div>\n  )\n}\n\nexport default myEditor\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"editorContainer\":\"Editor_2PhySOo0ox\",\"readOnly\":\"Editor_2OuOltIoIB\",\"container\":\"Editor_1NXcSSwe2z\"};"],"sourceRoot":""}