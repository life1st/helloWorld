{"version":3,"sources":["webpack:///./src/static/components/Editor/inde.scss?2d39","webpack:///./src/static/Pages/Note/index.scss?afad","webpack:///./src/static/Pages/Note/index.js","webpack:///./src/static/components/Editor/index.js"],"names":["module","exports","NotePage","id","useParams","history","useHistory","useQuery","API","note","retry","refetchOnWindowFocus","isLoading","data","error","replace","user","editorState","EditorState","createWithContent","convertFromRaw","JSON","parse","content","className","css","container","noteTitle","title","meta","name","onClick","push","confirm","deleteNote","then","editorConfig","readOnly","myEditor","submitText","onSubmit","useState","createEmpty","setEditorState","editorRef","useRef","cls","editorContainer","current","focus","ref","onChange"],"mappings":"6EACAA,EAAOC,QAAU,CAAC,gBAAkB,oBAAoB,SAAW,oBAAoB,UAAY,sB,oBCAnGD,EAAOC,QAAU,CAAC,UAAY,kBAAkB,UAAY,kBAAkB,KAAO,oB,iCCDrF,mFA2DeC,UAnDE,WAAM,IACbC,EAAOC,cAAPD,GACFE,EAAUC,cAFK,EAGcC,YAASJ,EAAIK,IAAIC,KAAM,CACxDC,OAAO,EACPC,sBAAsB,IAFhBC,EAHa,EAGbA,UAAWC,EAHE,EAGFA,KAQnB,GAXqB,EAGIC,OAMvBT,EAAQU,QAAQ,KAEdH,EACF,OAAQ,2CAZW,IAcbI,EAASH,EAATG,KACFC,EAAcC,cAAYC,kBAC9BC,yBAAeC,KAAKC,MAAMT,EAAKU,WAcjC,OACE,yBAAKC,UAAWC,IAAIC,WAClB,wBAAIF,UAAWC,IAAIE,WAAYd,EAAKe,OACpC,uBAAGJ,UAAWC,IAAII,MAChB,8BAAOb,EAAKc,MACZ,4BAAQC,QAhBK,WACjB1B,EAAQ2B,KAAR,gBAAsB7B,EAAtB,YAeI,QACA,4BAAQ4B,QAdO,WACfE,QAAQ,4BAAD,OAA6BpB,EAAKe,MAAlC,QACTpB,IAAI0B,WAAW/B,GAAIgC,MAAK,WACtB9B,EAAQ2B,KAAK,UAWb,WAEF,kBAAC,IAAD,CACEI,aAAc,CACZC,UAAU,EACVpB,iBAGJ,6BACE,4BAAQc,QAAS,WAAO1B,EAAQ2B,KAAK,OAArC,iB,+vCCbOM,IAlCE,SAAC,GAIZ,QAHJC,kBAGI,MAHS,SAGT,MAFJC,gBAEI,MAFO,aAEP,MADJJ,oBACI,MADW,GACX,MACoCK,mBACtCL,EAAanB,YACXmB,EAAanB,YACbC,cAAYwB,eAJZ,GACIzB,EADJ,KACiB0B,EADjB,KAMEC,EAAYC,iBAAO,MAOzB,OACE,yBAAKrB,UAAWC,IAAIC,WAClB,yBAAKF,UAAWsB,IAAIrB,IAAIsB,gBAAiBX,EAAaC,UAAYZ,IAAIY,UAAWN,QAR9D,WACrBa,EAAUI,QAAQC,UAQd,kBAAC,SAAD,KACMb,EADN,CAEEc,IAAKN,EACL3B,YAAaA,EACbkC,SAAUR,OAGXP,EAAaC,UACd,4BAAQN,QAbO,kBAAMS,EAASvB,KAaEsB","file":"4.b8bd.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"editorContainer\":\"Editor_2PhySOo0ox\",\"readOnly\":\"Editor_2OuOltIoIB\",\"container\":\"Editor_1NXcSSwe2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Note_1r4czJoBEs\",\"noteTitle\":\"Note_33TVEVF5Z5\",\"meta\":\"Note_qjNvsCaKKG\"};","import React from 'react'\nimport { useQuery } from 'react-query'\nimport { API } from '../../utils/Api'\nimport { useParams, useHistory } from 'react-router-dom'\nimport Editor from '../../components/Editor'\nimport { EditorState, convertFromRaw } from 'draft-js'\nimport css from './index.scss'\n\nconst NotePage = () => {\n  const { id } = useParams()\n  const history = useHistory()\n  const { isLoading, data, error } = useQuery(id, API.note, {\n    retry: false,\n    refetchOnWindowFocus: false\n  })\n\n  if (error) {\n    history.replace('/')\n  }\n  if (isLoading) {\n    return (<div>Loading...</div>)\n  }\n  const { user } = data\n  const editorState = EditorState.createWithContent(\n    convertFromRaw(JSON.parse(data.content))\n  )\n\n  const handleEdit = () => {\n    history.push(`/note/${id}/edit`)\n  }\n  const handleDelete = () => {\n    if (confirm(`ensure delete this note: ${data.title} ?`)) {\n      API.deleteNote(id).then(() => {\n        history.push('/')\n      })\n    }\n  }\n\n  return (\n    <div className={css.container}>\n      <h1 className={css.noteTitle}>{data.title}</h1>\n      <p className={css.meta}>\n        <span>{user.name}</span>\n        <button onClick={handleEdit}>Edit</button>\n        <button onClick={handleDelete}>Delete</button>\n      </p>\n      <Editor\n        editorConfig={{\n          readOnly: true,\n          editorState\n        }}\n      />\n      <div>\n        <button onClick={() => {history.push('/')}}>Back Home</button>\n      </div>\n    </div>\n  )\n}\n\nexport default NotePage\n","import React, { useState, useRef } from 'react'\nimport { Editor, EditorState } from 'draft-js'\nimport 'draft-js/dist/Draft.css'\nimport css from './inde.scss'\nimport cls from 'classnames'\n\nconst myEditor = ({\n  submitText = 'submit',\n  onSubmit = () => {},\n  editorConfig = {}\n}) => {\n  const [ editorState, setEditorState ] = useState(\n    editorConfig.editorState\n    ? editorConfig.editorState\n    : EditorState.createEmpty()\n  )\n  const editorRef = useRef(null)\n  const handleModClick = () => {\n    editorRef.current.focus()\n  }\n  \n  const handleSubmit = () => onSubmit(editorState)\n\n  return (\n    <div className={css.container}>\n      <div className={cls(css.editorContainer, editorConfig.readOnly && css.readOnly)} onClick={handleModClick}>\n        <Editor\n          {...editorConfig}\n          ref={editorRef}\n          editorState={editorState}\n          onChange={setEditorState}\n        />\n      </div>\n      { !editorConfig.readOnly && (\n        <button onClick={handleSubmit}>{submitText}</button>\n      ) }\n    </div>\n  )\n}\n\nexport default myEditor\n"],"sourceRoot":""}